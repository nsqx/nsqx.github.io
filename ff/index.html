
<!DOCTYPE html>
<html><!---?fallforward by nsq--->
<head>
    <style>* {color-scheme:light;background:white;}a,fakea{color:#0969da;text-decoration:none;cursor:pointer;user-select:text;}a:hover,fakea:hover{text-decoration:underline solid 1px;}body,html{display:flex;font-size:13px;justify-content:center;}html{zoom:1;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";overflow:auto;height:100vh;width:100vw}html{overflow:auto;overflow-x:hidden;height:100vh;width:100vw}code{padding-top:32px;padding-bottom:42px;white-space:pre-wrap;font-family:Consolas,Courier,'Courier New',monospace;flex-direction:column;width:840px;height:fit-content;max-width:840px;display:block;overflow:visible}summary{cursor:pointer;}details>summary:first-of-type{list-style-position:outside!important;position:sticky;top:0px;}/*ln{list-style-type:decimal-leading-zero;display:list-item;counter-increment:list-item;content:counter(list-item);}*/.hoverendlabel{position:fixed;text-align:center;bottom:0px;left:0px;right:0px;z-index:12370192308120938;height:42px;background:linear-gradient(0deg, #ffffff 0%, rgba(255, 255, 255, .8) 50%, rgba(255,255,255,0) 100%);user-select:none;pointer-events:none;font-weight:400;}.hoverendlabel :not(br){font-size:14px}div{font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";}fail{color:#cf222e; display:inline;}details{margin:0px;padding:0px;}::selection{ background: rgba(29, 153, 255, 0.511) !important;}::-moz-selection { background: rgba(29, 153, 255, 0.511) !important; }success{color:#1a7f37; display:inline;}[stickytop]{position:sticky;top:0px;padding:0px;}body{flex-direction:column; justify-content:start; align-items: center;}[stickytopbottom]{position:sticky;top:0px;bottom:0px;}[stickybottommore]{position:sticky;bottom:42px;padding:0px;}ln{width:100%;display:inline-block;counter-increment: linenumbercount 1}ln:hover, ln:hover *{background:#f3f9ff}ln::before{content:counter(linenumbercount);margin-left:-3rem;margin-right:3rem;position:Absolute;opacity:.36;cursor:row-resize;}ln:hover::before{opacity:1}/*ln:active{cursor:col-resize}*/@media (prefers-color-scheme: dark){* {color-scheme:dark;background:#161d27;color:#c9d1d9;}a,fakea{color:#67a8f1;text-decoration:none;cursor:pointer;user-select:text;}a:hover,fakea:hover{text-decoration:underline solid 1px;}body,html{display:flex;font-size:13px;justify-content:center;}html{zoom:1;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";overflow:auto;height:100vh;width:100vw}html{overflow:auto;overflow-x:hidden;height:100vh;width:100vw}code{padding-top:32px;padding-bottom:42px;white-space:pre-wrap;font-family:Consolas,Courier,'Courier New',monospace;flex-direction:column;width:840px;height:fit-content;max-width:840px;display:block;overflow:visible}summary{cursor:pointer;}details>summary:first-of-type{list-style-position:outside!important;position:sticky;top:0px;}/*ln{list-style-type:decimal-leading-zero;display:list-item;counter-increment:list-item;content:counter(list-item);}*/.hoverendlabel{position:fixed;text-align:center;bottom:0px;left:0px;right:0px;z-index:12370192308120938;height:42px;background:linear-gradient(0deg, #161d27 0%, rgba(22, 29, 39, .8) 50%, rgba(255,255,255,0) 100%);user-select:none;pointer-events:none;font-weight:400;}.hoverendlabel :not(br){font-size:14px}div{font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";}fail{color:#f5645c;display:inline;}details{margin:0px;padding:0px;}::selection{ background: rgba(29, 153, 255, 0.511) !important;}::-moz-selection { background: rgba(29, 153, 255, 0.511) !important; }success{color:#3fb950; display:inline;}[stickytop]{position:sticky;top:0px;padding:0px;}body{flex-direction:column; justify-content:start; align-items: center;}[stickytopbottom]{position:sticky;top:0px;bottom:0px;}[stickybottommore]{position:sticky;bottom:42px;padding:0px;}ln{width:100%;display:inline-block;counter-increment: linenumbercount 1}ln:hover, ln:hover *{background:#1f2e42;}ln::before{content:counter(linenumbercount);margin-left:-3rem;margin-right:3rem;position:Absolute;opacity:.36;cursor:row-resize;}ln:hover::before{opacity:1}/*ln:active{cursor:col-resize}*/}</style>
</head>
<body>
    <title>! Falling forward</title>
<CODE id=errorstack><ln>! Falling forward</ln>
<ln>! FALLFORWARD: FALLING_FORWARD</ln>
<ln>!</ln>
<DETAILS><ln><SUMMARY id=debug_details_expand_button stickytop>! Trace details                              ================                                        <fakea draggable=true>#</fakea></SUMMARY></ln><ln>!</ln>
<ln>! this.location</ln>
<ln>!     .href:            \'<a href=\'${window.location.href}\'>${window.location.href}</a>\'</ln>
<ln>!     .pathname:        \'<a href='${window.location.pathname}'>${window.location.pathname}</a>\'</ln>
<ln>!     .search:          \'<a draggable=true>${window.location.search}</a>\'</ln>
<ln>!     .hash:            \'<a draggable=true>${window.location.hash}</a>\'</ln>
<ln>!     .host:            \'<a draggable=true>${window.location.host}</a>\'</ln>
<ln>!     .origin:          \'<a draggable=true>${window.location.origin}</a>\'</ln>
<ln>!     .protocol:        \'<a draggable=true>${window.location.protocol}</a>\'</ln>
<ln>! fallforward:          \'<a href=\'${fallforward}\'>${fallforward}</a>\'</ln>
<ln>! ref:                  \'<a draggable=true>${ref}</a>\'</ln>
<ln>! universalpath:        \'<a draggable=true>${universalpath}</a>\'</ln>
<ln>!</ln>
<ln>!                                            ================                                         </ln></DETAILS><ln>!</ln>
<ln stickytop>! >                     <success>FALLFORWARD: FALLING_FORWARD</success></ln><ln>! -------------------------------------------------------------------------------------------------- #</ln>

<div class="hoverendlabel"><br>Fallforward service / nsq / Succeeding</div>
    <script id=s>
        function _init(replace = true, title = '! Fallforward', footnote = 'Fallforward service / nsq /'){
            if (replace){
                document.body.innerHTML = `<title>${title}</title>`
                var code_Block_elem_sldpsldp = document.createElement('code')
                code_Block_elem_sldpsldp.id = "errorstack"
                document.body.appendChild(code_Block_elem_sldpsldp)
                var divfootnote_Block_elem_sldpsldp = document.createElement('div')
                divfootnote_Block_elem_sldpsldp.classList.add("hoverendlabel")
                divfootnote_Block_elem_sldpsldp.innerHTML = "<br>" + footnote
                document.body.appendChild(divfootnote_Block_elem_sldpsldp)
            }else{
                document.body.innerHTML += `<title>${title}</title>`
                var code_Block_elem_sldpsldp = document.createElement('code')
                code_Block_elem_sldpsldp.id = "errorstack"
                document.body.appendChild(code_Block_elem_sldpsldp)
                var divfootnote_Block_elem_sldpsldp = document.createElement('div')
                divfootnote_Block_elem_sldpsldp.classList.add("hoverendlabel")
                divfootnote_Block_elem_sldpsldp.innerHTML = "<br>" + footnote
                document.body.appendChild(divfootnote_Block_elem_sldpsldp)
            }
        }

        function _pushln(line, opt = ''){
            document.querySelector('#errorstack').innerHTML += '<ln ' + opt + '>' + line + '</ln>\n'
        }

        function _pushblk(block, opt = ''){
            document.querySelector('#errorstack').innerHTML += '<ln ' + opt + '>' + block + '</ln>'
        }

        function _pushlns(lines){
            try {
                for (const line of lines){
                    document.querySelector('#errorstack').innerHTML += '<ln>' + line + '</ln>'
                }
            }catch(err){
                document.querySelector('#errorstack').innerHTML += '<ln>! <fail>Internal error</fail>:</ln>'
                document.querySelector('#errorstack').innerHTML += '<ln>! >                     <fail>(Uncaught) ' + err + '</fail></ln>'
            }
        }

        function _pushinl(line, opt = ''){
            document.querySelector('#errorstack').innerHTML += '<ln' + opt + '>' + line + '</ln>'
        }



        function downloadlogman(){
            let link = document.createElement('a');
            link.download = 'fallforward-' + '-' + (new Date).getDate() + '-' + (new Date).getMonth() + '-' + (new Date).getFullYear() + '--' + (new Date).getHours() + '-' + (new Date).getMinutes() + '-' + (new Date).getSeconds() + '-log.txt';let blob = new Blob([document.querySelector('#errorstack').innerText], {type: 'text/plain'});link.href = URL.createObjectURL(blob);link.click();URL.revokeObjectURL(link.href);
        }
        window.onload=(function(){s.innerHTML=''
                var fallforward = "/ff/!/!/!/!.json";
                if(window.location.hash != ''){
                    var ref = window.location.hash.slice(2); // using format https://baseurl.tld/path/fallforward/#/JSONref
                    var universalpath = window.location.hash.slice(1); // using format https://baseurl.tld/path/fallforward/#/JSONref
                }else{
                    var ref = "!!!!!!!!!!!!!!!!!!!!!!FALLFORWARD:FELL_FLAT";
                };

            if (window.location.hash.startsWith('#-')){
                setTimeout(()=>{window.location.href = ref;}, 500)

                _init(true, '! Falling forward', 'Fallforward service / nsq / <succeed>Succeeding</succeed>')

                _pushln(`! Falling forward`)
                _pushln(`! FALLFORWARD: FALLING_FORWARD`)
                _pushln(`!`)
                _pushblk(`<DETAILS><SUMMARY id=debug_details_expand_button stickytop>! Trace details                              ================                                        <fakea draggable=true>#</fakea></SUMMARY>!
! this.location
!     .href:            \'<a href=\'${window.location.href}\'>${window.location.href}</a>\'
!     .pathname:        \'<a href='${window.location.pathname}'>${window.location.pathname}</a>\'
!     .search:          \'<a draggable=true>${window.location.search}</a>\'
!     .hash:            \'<a draggable=true>${window.location.hash}</a>\'
!     .host:            \'<a draggable=true>${window.location.host}</a>\'
!     .origin:          \'<a draggable=true>${window.location.origin}</a>\'
!     .protocol:        \'<a draggable=true>${window.location.protocol}</a>\'
! fallforward:          \'<a href=\'${fallforward}\'>${fallforward}</a>\'
! ref:                  \'<a draggable=true>${ref}</a>\'
! universalpath:        \'<a draggable=true>${universalpath}</a>\'
!
! Date():               ${Date()}
!
!                                            ================                                         </DETAILS>`)
                _pushln(`!`)
                _pushln(`<code stickytop>! >                     <success>FALLFORWARD: FALLING_FORWARD</success></code>`)
                _pushln(`! -------------------------------------------------------------------------------------------------- #`)
            }else if(window.location.hash.startsWith('#/')){
                fetch(fallforward)
                .then( function (response) {return response.json();} )
                .then( function (data) {
                    if(ref != "!!!!!!!!!!!!!!!!!!!!!!FALLFORWARD:FELL_FLAT"){
                        if (data.get[ref] != undefined){
                        window.location.href = data.get[ref]
                        }else{

                            _init(true, '! Fallforward destination is invalid', 'Fallforward service / nsq / <fail>Failure</fail>')

                            _pushln(`! Fallforward destination is invalid`)
                            _pushln(`! FALLFORWARD: FELL_FLAT`)
                            _pushln(`!`)
                            _pushblk(`<DETAILS><SUMMARY id=debug_details_expand_button stickytop>! Trace details                              ================                                        <fakea draggable=true>#</fakea></SUMMARY>!
! this.location
!     .href:            \'<a href=\'${window.location.href}\'>${window.location.href}</a>\'
!     .pathname:        \'<a href='${window.location.pathname}'>${window.location.pathname}</a>\'
!     .search:          \'<a draggable=true>${window.location.search}</a>\'
!     .hash:            \'<a draggable=true>${window.location.hash}</a>\'
!     .host:            \'<a draggable=true>${window.location.host}</a>\'
!     .origin:          \'<a draggable=true>${window.location.origin}</a>\'
!     .protocol:        \'<a draggable=true>${window.location.protocol}</a>\'
! fallforward:          \'<a href=\'${fallforward}\'>${fallforward}</a>\'
! ref:                  \'<a draggable=true>${ref}</a>\'
! universalpath:        \'<a draggable=true>${universalpath}</a>\'
!
! Date():               ${Date()}
!
!                                            ================                                         </DETAILS>`)
                            _pushln(`! `)
                            _pushln(`! Error details:`)
                            _pushln(`<code stickytop>! >                     <fail>FALLFORWARD: FELL_FLAT</fail></code>`)
                            _pushln(`!`)
                            _pushln(`! -------------------------------------------------------------------------------------------------- #`)

                            _pushln(`<code style=text-align:right;background:transparent;width:fit-content;position:fixed;right:20vw;bottom:0px><a draggable=true onclick="downloadlogman()" tabindex=1>Save log</a></code>`);
                            debug_details_expand_button.click();
                        }

                    }else{


                        _init(true, '! Fallforward destination is absent', 'Fallforward service / nsq / <fail>Failure</fail>')

                        _pushln(`! Fallforward destination is absent`)
                        _pushln(`! FALLFORWARD: FELL_FLAT`)
                        _pushln(`!`)
                        _pushblk(`<DETAILS><SUMMARY id=debug_details_expand_button stickytop>! Trace details                              ================                                        <fakea draggable=true>#</fakea></SUMMARY>!
! this.location
!     .href:            \'<a href=\'${window.location.href}\'>${window.location.href}</a>\'
!     .pathname:        \'<a href='${window.location.pathname}'>${window.location.pathname}</a>\'
!     .search:          \'<a draggable=true>${window.location.search}</a>\'
!     .hash:            \'<a draggable=true>${window.location.hash}</a>\'
!     .host:            \'<a draggable=true>${window.location.host}</a>\'
!     .origin:          \'<a draggable=true>${window.location.origin}</a>\'
!     .protocol:        \'<a draggable=true>${window.location.protocol}</a>\'
! fallforward:          \'<a href=\'${fallforward}\'>${fallforward}</a>\'
! ref:                  \'<a draggable=true>${ref}</a>\'
! universalpath:        \'<a draggable=true>${universalpath}</a>\'
!
! Date():               ${Date()}
!
!                                            ================                                         </DETAILS>`)
                        _pushln(`! `)
                        _pushln(`! Error details:`)
                        _pushln(`<code stickytop>! >                     <fail>FALLFORWARD: FELL_FLAT</fail></code>`)
                        _pushln(`!`)
                        _pushln(`! -------------------------------------------------------------------------------------------------- #`)

                        _pushln(`<code style=text-align:right;background:transparent;width:fit-content;position:fixed;right:20vw;bottom:0px><a draggable=true onclick="downloadlogman()" tabindex=1>Save log</a></code>`);
                        debug_details_expand_button.click();;
                    };
                } )
                .catch(function (err) {
                    console.log('! An error occured while fetching\n! ', fallforward, '\n! Error details:');
                    _init(true, '! Fallforward failed', 'Fallforward service / nsq / <fail>Failure</fail>')
                    _pushinl(`<code style=text-align:right;background:transparent;width:fit-content;position:fixed;right:20vw;bottom:0px><a draggable=true onclick="downloadlogman()" tabindex=1>Save log</a></code>`, opt='style=\"margin-left:-100vw;\"')
                    _pushln(`! Fallforward failed`)
                    _pushln(`! FALLFORWARD: UNCAUGHT_FETCH_FAILED / FELL_FLAT`)
                    _pushln(`!`)
                    _pushblk(`<DETAILS><SUMMARY id=debug_details_expand_button stickytop>! Trace details                              ================                                        <fakea draggable=true>#</fakea></SUMMARY>!
! this.location
!     .href:            \'<a href=\'${window.location.href}\'>${window.location.href}</a>\'
!     .pathname:        \'<a href='${window.location.pathname}'>${window.location.pathname}</a>\'
!     .search:          \'<a draggable=true>${window.location.search}</a>\'
!     .hash:            \'<a draggable=true>${window.location.hash}</a>\'
!     .host:            \'<a draggable=true>${window.location.host}</a>\'
!     .origin:          \'<a draggable=true>${window.location.origin}</a>\'
!     .protocol:        \'<a draggable=true>${window.location.protocol}</a>\'
! fallforward:          \'<a href=\'${fallforward}\'>${fallforward}</a>\'
! ref:                  \'<a draggable=true>${ref}</a>\'
! universalpath:        \'<a draggable=true>${universalpath}</a>\'
!
! Date():               ${Date()}
!
!                                            ================                                         </DETAILS>`)
                    _pushln(`!`) 
                    _pushln(`! Error details:`)
                    _pushln(`<code stickytop>! >                     <fail>Uncaught (in promise) ${err}</fail></code>!`)
                    _pushln(`! ----------------------------------------------------------------------------------------------------`)
                    _pushln(`! Retrying...`)


                    debug_details_expand_button.click();
                    retryno = 0;
                    function clearretry(){
                        clearInterval(retryinterval)
                        _pushln('!')
                        _pushln('! Retry cancelled.')
                    }
                    function subtime(e){
                        document.querySelector('#cancelretrytext' + e).scrollIntoView({behavior:'smooth', block:'start'})
                        setTimeout(()=>{
                        document.querySelector('#timeintervleft' + e).innerText = 9}, 1000)
                        setTimeout(()=>{
                        document.querySelector('#timeintervleft' + e).innerText = 8}, 2000)
                        setTimeout(()=>{
                        document.querySelector('#timeintervleft' + e).innerText = 7}, 3000)
                        setTimeout(()=>{
                        document.querySelector('#timeintervleft' + e).innerText = 6;}, 4000)
                        setTimeout(()=>{
                        document.querySelector('#timeintervleft' + e).innerText = 5;}, 5000)
                        setTimeout(()=>{
                        document.querySelector('#timeintervleft' + e).innerText = 4;}, 6000)
                        setTimeout(()=>{
                        document.querySelector('#timeintervleft' + e).innerText = 3;}, 7000)
                        setTimeout(()=>{
                        document.querySelector('#timeintervleft' + e).innerText = 2;}, 8000)
                        setTimeout(()=>{
                        document.querySelector('#timeintervleft' + e).innerText = 1;}, 9000)
                        setTimeout(()=>{document.querySelector('#t' + e + 'ext').outerHTML = ''; document.querySelector('#cancelretrytext' + e).outerHTML = ''}, 10000)
                    }
                    function sendretry(){
                        retryno += 1
                        fetch(fallforward)
                            .then( function (response) {return response.json();} )
                            .then( function (data) {_pushln('\n!' + retryno +': Retry <success>succeeded</success>.\n! <a href="">Reloading, please wait...</a>'); setTimeout(()=>{window.location.reload}, 1000)})
                            .catch(function (err) {_pushln('! ' + retryno + ': Retry <fail>failed</fail>.');_pushln('! Retrying<span id=t' + retryno + 'ext> in <span id=timeintervleft' + retryno + '>10</span>s</span>... <span id=cancelretrytext' + retryno + '>Click <a draggable=true onclick="clearInterval(retryinterval); _pushln(\'!\');_pushln(\'! Retry cancelled.\');_pushln(\'! ----------------------------------------------------------------------------------------------------\');_pushln(\'! Conclusion: <fail>Unresolved failure</fail>. <a draggable=true onclick=\\\'downloadlogman()\\\'>Save log</a>.<br>! -------------------------------------------------------------------------------------------------- #\', \' stickybottommore\')">here</a> to cancel.</span>'); subtime(retryno)})
                    }
                    setTimeout(sendretry, 200)
                    setTimeout(sendretry, 500)
                    setTimeout(sendretry, 600)
                    setTimeout(sendretry, 700)
                    setTimeout(()=>{retryinterval = setInterval(sendretry, 10000)}, 1000)
                    throw err;
                } );
            }else{
                _init(true,'! Fallforward destination is absent', 'Fallforward service / nsq / <fail>Failure</fail>')

                _pushln(`! Fallforward destination is absent`)
                _pushln(`! FALLFORWARD: FELL_FLAT`)
                _pushln(`!`)
                _pushblk(`<DETAILS><SUMMARY id=debug_details_expand_button stickytop>! Trace details                              ================                                        <fakea draggable=true>#</fakea></SUMMARY>!
! this.location
!     .href:            \'<a href=\'${window.location.href}\'>${window.location.href}</a>\'
!     .pathname:        \'<a href='${window.location.pathname}'>${window.location.pathname}</a>\'
!     .search:          \'<a draggable=true>${window.location.search}</a>\'
!     .hash:            \'<a draggable=true>${window.location.hash}</a>\'
!     .host:            \'<a draggable=true>${window.location.host}</a>\'
!     .origin:          \'<a draggable=true>${window.location.origin}</a>\'
!     .protocol:        \'<a draggable=true>${window.location.protocol}</a>\'
! fallforward:          \'<a href=\'${fallforward}\'>${fallforward}</a>\'
! ref:                  \'<a draggable=true>${ref}</a>\'
! universalpath:        \'<a draggable=true>${universalpath}</a>\'
!
! Date():               ${Date()}
!
!                                            ================                                         </DETAILS>`)
                _pushln(`! `)
                _pushln(`! Error details:`)
                _pushln(`<code stickytop>! >                     <fail>FALLFORWARD: FELL_FLAT</fail></code>`)
                _pushln(`!`)
                _pushln(`! -------------------------------------------------------------------------------------------------- #`)

                _pushln(`<code style=text-align:right;background:transparent;width:fit-content;position:fixed;right:20vw;bottom:0px><a draggable=true onclick="downloadlogman()" tabindex=1>Save log</a></code>`);
                debug_details_expand_button.click();;
            }

            
        });
    </script>
</body>
</html>
